<!-- based on template from mapbox found at https://www.mapbox.com/mapbox.js/example/v1.0.0/scroll-driven-navigation/ -->
<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>Ancestor Mapping</title>

  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  
  <script src='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js'></script>
  
  <link href='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css' rel='stylesheet' />
  
  <style>
      body { margin:0;
            padding:0; }

      #map { position:absolute; 
              top:0; 
              bottom:0; 
              /* makes the map size fluid */
              width:100%; }
  </style>

</head>

<body>
  <style>
      article {
        position:absolute;
        top:0;
        right:0;
        bottom:0px;
        left:0;
        overflow:auto;
        }

      .quiet {
        color:rgba(0,0,0,0.5);
        }

      .scroll {
        display:block;
        text-align:center;
        }

      .sections {
        background:rgba(255,255,255,0.5);
        width:400px;
        }

      section {
        padding:20px;
        color:rgba(0,0,0,0.5);
        -webkit-transition:background 500ms, color 500ms;
                transition:background 500ms, color 500ms;
        }

      section.active {
        background:#fff;
        color:#404040;
        }

      img {
        float: left;
        padding: 10px;
        }
  </style>
  

  <div id='map'></div>

  <article id='narrative'>
    <div class='sections prose'>
      
      <section id='cover' class='cover active'>
        <h2>Mapping Maternal Ancestors</h2>
        <small class='scroll quiet'>Scroll to Advance &#x25BE;</small>
      </section>

      <section id='one'>
        <h3>Peggie Hargrave (?-?)</h3>
        <p>Peggie Hargrave was probably born in the 1790s in south-central Kentucky or north-central Tennessee. Little is known about Peggie's life or  her parents, though we do know that in 1808 she married James Looney "Looney" Ratliff in Logan, Kentucky.  Looney's mother was Cherokee; because Cherokee membership is matrilineal, Looney was also considered Cherokee. Peggie and Looney had two daugthers: Jane, born in 1814, and <b>Lucy</b>, born in 1827.  Peggie's date and location of death is unknown.</p>
      </section>

      <section id='two'>
        <h3>Lucy Ratliff (1827-1871)</h3>
        <p>Lucy Ratliff was born in 1827 in Cherokee Nation East (modern Tennessee), only a few years prior to the <a href="https://en.wikipedia.org/wiki/Indian_Removal_Act">Indian Removal Act</a> of 1830. She married Lewis Walker Hildebrand in the late 1830s or early 1840s. Lucy was the second of Lewis's four wives. Her sister, Jennie, married Lewis's brother, Isaac Newton Hildebrand. 
        <br>
        <br>Lewis was the great grandson of <a href="https://en.wikipedia.org/wiki/Nancy_Ward">Nanyehi</a>, also known as Nancy Ward, a Beloved Woman of the Cherokee who was an important representative of the Cherokee in their early dealings with white colonists. Lewis was an assistant conductor of a wagon train on the <a href="https://en.wikipedia.org/wiki/Trail_of_Tears">Trail of Tears</a>; his party left in late 1838 and arrived in "Indian Terriotory" in early March of the following year, having lost 28 members of the party. Lewis's first wife, Nancy Busyhead Walker Hildebrand, died along the trail in southern Missouri. We do not know whether Lucy accompanied Lewis along the Trail of Tears, or if she was a member of a different wagon party. We do know that she had arrived in Indian Territory by 1842, when her daughter <b>Annie</b> was born. Lucy was 15 when Annie was born.    
        <br>      
        <br>
        While her date of death is unknown, Lucy died before 1871 in the Delaware District of Cherokee Nation West (Indian Territory) and is buried in Rolston Cemetery in Bernice, Oklahoma.</p>
      </section>

        <section id='three'>
        <h3>Annie Hildebrand (1842-1892)</h3>
        <p> Annie Hildebrand was born in 1842 in Cherokee Nation, Indian Territory. While her exact birth location is unknown, it is likely that she was born in what is now eastern Oklahoma. She had one daughter, <b>Joanna</b>, with John Ross Linder. Joanna was born in Cherokee Nation West's Delaware District. Annie died in the same region in 1892 and is buried in Rolston Cemetery in Bernice, Oklahoma.</p>
      </section>


      <section id='four'>
        <h3>Joanna Ruth Linder (1861-1910)</h3>

        <p>
        <img src="img/JoannaLinder.jpg" alt="Joanna Linder" width=200px>
       
        Joanna Linder was born in the Delaware District of Cherokee Nation West in 1861. At the age of 15 she married Felix Grundy Nidiffer (in 1876), and they had 11 children, 10 of which survived to adulthood. After Felix's death in 1896, she remarried and had two additional children. Joanna died in 1919 in Bernice, Oklahoma. 
        </p>

      </section>
      
      <section id='five'>
        <h3>Annie Lula Nidiffer (1881-1962)</h3>
        <p>
        <img src="img/AnnieNidiffer_young.jpg" alt="Annie Nidiffer" height="300" align="top">
         Annie Nidiffer was born in 1881 in the Delaware District of Cherokee Nation West. Annie was the second child of Joanna Linder and Felix Nidiffer, and was born when her mother was 19. 
        <br>      
        <br>
        Annie's great-great-grandfather, George Ward, was assassinated 18 years prior to her birth by the "Pin Indians," a Cherokee secret society devoted to maintaining traditional Cherokee ways of life
        <br>      
        <br>
        In the early 1890s, Native Americans living in Indian Territory were forced to cede all communally held tribal land, which was then divided and allotted to individuals who could prove "blood" descent  (<a href="https://en.wikipedia.org/wiki/Dawes_Commission">Dawes Commission</a>). Any "surplus" land was then reallocated to Euro-American settlers moving west. As a member of the Cherokee tribe, Annie was eventually allocated a plot of land.
        <br>      
        <br> 
        Annie married Hiram Judson "Jud" Allison in 1903 at the age of 22. They settled in Afton, a small town in what was to become northeastern Oklahoma. 
        <img src="img/AnnieNidiffer_wedding.jpg" alt="Annie Nidiffer & Jud Allison wedding photo" height="400">
        Annie and Jud had three children, though only two survived past birth. 

        <br>
        <br>
        Between the births of her daughter Marguerite (1905) and her son Hiram (1915), the state of Oklahoma was admitted to the United States in 1907. 
        <br>
        <br>
        Annie died in 1962. She is buried in the Mount Hope Cemetery in Afton, Oklahoma. 
        </p>
      </section>

      <section id='six'>
        <h3>Marguerite Drennan Allison (1905-1994)</h3>
        <p>MLorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque ullamcorper odio mollis, porta turpis eu, convallis mi. Nam ultricies ante non dolor elementum, quis varius mi viverra. Quisque purus lorem, congue ac est et, porttitor egestas dui. Curabitur euismod rutrum nibh, id aliquet odio finibus ut. Donec euismod nisl at nisi auctor vestibulum. Proin gravida nibh vel viverra sodales. Cras lacinia feugiat orci a faucibus. Maecenas congue lobortis est a dapibus. Phasellus a ultricies justo. Proin sit amet odio porta, condimentum ante vel, mattis lorem. Integer ac congue eros.</p>

        . 
      </section>

      <section id='seven'>
        <h3>Patricia Jimerson (1931-present)</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque ullamcorper odio mollis, porta turpis eu, convallis mi. Nam ultricies ante non dolor elementum, quis varius mi viverra. Quisque purus lorem, congue ac est et, porttitor egestas dui. Curabitur euismod rutrum nibh, id aliquet odio finibus ut. Donec euismod nisl at nisi auctor vestibulum. Proin gravida nibh vel viverra sodales. Cras lacinia feugiat orci a faucibus. Maecenas congue lobortis est a dapibus. Phasellus a ultricies justo. Proin sit amet odio porta, condimentum ante vel, mattis lorem. Integer ac congue eros.</p>
      </section>

      <section id='eight'>
        <h3>Margaret Lynne Bell (1954-present)</h3>
        <p>Lynne was born in 1954 in Enid, Oklahoma</p>
      </section>

      <section id='nine'>
        <h3>Lauren Hendricks (1989-present)</h3>
        <p>Lauren was born in 1989 in Minneapolis, Minnesota.</p>
      </section>
    </div>
  </article>

  <script>
  // with Lauren's access token
  L.mapbox.accessToken = 'pk.eyJ1IjoibGF1cmVuYmhlbmRyaWNrcyIsImEiOiJjamh2M2d5ajEwdXo3M3FydzQ4c2hzbzJxIn0.S5JR4g-IHGGlYu4Y7p16gg';
  

  // In this case, we just hardcode data into the file. This could be dynamic.
  // The important part about this data is that the 'id' property matches
  // the HTML above - that's how we figure out how to link up the
  // map and the data.

  // NOTE THAT THESE NEED TO BE LONG,LAT!!!!
  var places = { type: 'FeatureCollection', features: [
    { geometry: { type: "Point", coordinates: [-96,37.8,] },
      properties: { id: "cover", zoom: 4 }, type: 'Feature' },

    { geometry: { type: "Point", coordinates: [-86.92,36.65,] },
      properties: { id: "one", zoom: 5 }, type: 'Feature' },

    { geometry: { type: "Point", coordinates: [-86.92,36.65] },
      properties: { id: "two", zoom: 7 }, type: 'Feature' },

    { geometry: { type: "Point", coordinates: [-94.9,36.61] },
      properties: { id: "three", zoom: 6  }, type: 'Feature' },

    { geometry: { type: "Point", coordinates: [-94.9,36.61] },
      properties: { id: "four", zoom: 6 }, type: 'Feature' },

    { geometry: { type: "Point", coordinates: [-94.9,36.61] },
      properties: { id: "five", zoom: 6  }, type: 'Feature' },

    { geometry: { type: "Point", coordinates: [-94.96,36.69] },
      properties: { id: "six", zoom: 6 }, type: 'Feature' },

    { geometry: { type: "Point", coordinates: [-94.96,36.69] },
      properties: { id: "seven", zoom: 6  }, type: 'Feature' },

    { geometry: { type: "Point", coordinates: [-97.87,36.41] },
      properties: { id: "eight", zoom: 6  }, type: 'Feature' },

    { geometry: { type: "Point", coordinates: [-93.25,44.98] },
    properties: { id: "nine", zoom: 6  }, type: 'Feature' }
      ]};

  var map = L.mapbox.map('map', 'mapbox.streets', {
      zoomControl: false
      });

  // Lauren's mapbox studio tile layer
  L.tileLayer('https://api.mapbox.com/styles/v1/laurenbhendricks/cjftxv7us3shz2rqm2grktj7o/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibGF1cmVuYmhlbmRyaWNrcyIsImEiOiJjaWs1cnd3YmowMDhucHRrc3Q5a2J5cjE3In0.j9sCY68mpCwY6YIOOWyIEQ', {
      attribution: 'Map Style © <a href="http://mapbox.com">Mapbox</a>',
      id: 'mapbox.light'
      }).addTo(map);


  var placesLayer = L.mapbox.featureLayer(places)
      .addTo(map);

  // Ahead of time, select the elements we'll need -
  // the narrative container and the individual sections
  var narrative = document.getElementById('narrative'),
      sections = narrative.getElementsByTagName('section'),
      currentId = '';

  setId('cover');

  function setId(newId) {
      // If the ID hasn't actually changed, don't do anything
      if (newId === currentId) return;
      // Otherwise, iterate through layers, setting the current
      // marker to a different color and zooming to it.
      placesLayer.eachLayer(function(layer) {
          if (layer.feature.properties.id === newId) {
              map.setView(layer.getLatLng(), layer.feature.properties.zoom || 14);
              layer.setIcon(L.mapbox.marker.icon({
                  'marker-color': '#a8f'
              }));
          } else {
              layer.setIcon(L.mapbox.marker.icon({
                  'marker-color': '#404040'
              }));
          }
      });
      // highlight the current section
      for (var i = 0; i < sections.length; i++) {
          sections[i].className = sections[i].id === newId ? 'active' : '';
      }
      // And then set the new id as the current one,
      // so that we know to do nothing at the beginning
      // of this function if it hasn't changed between calls
      currentId = newId;
  }

  // If you were to do this for real, you would want to use
  // something like underscore's _.debounce function to prevent this
  // call from firing constantly.
  narrative.onscroll = function(e) {
      var narrativeHeight = narrative.offsetHeight;
      var newId = currentId;
      // Find the section that's currently scrolled-to.
      // We iterate backwards here so that we find the topmost one.
      for (var i = sections.length - 1; i >= 0; i--) {
          var rect = sections[i].getBoundingClientRect();
          if (rect.top >= 0 && rect.top <= narrativeHeight) {
              newId = sections[i].id;
          }
      };
      setId(newId);
  };
  </script>
  </body>
</html>